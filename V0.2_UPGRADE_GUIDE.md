# @ldesign/barcode v0.2.0 å‡çº§æŒ‡å—

## ğŸ‰ æ–°åŠŸèƒ½

### 1. æŒ‰éœ€å¯¼å…¥ï¼ˆTree-shaking å‹å¥½ï¼‰

**v0.1.0** (æ‰€æœ‰åŠŸèƒ½éƒ½ä¼šè¢«æ‰“åŒ…):
```typescript
import { createBarcode } from '@ldesign/barcode';
```

**v0.2.0** (å¯é€‰æ‹©æ€§å¯¼å…¥):
```typescript
// æ–¹å¼1: å®Œæ•´å¯¼å…¥ï¼ˆä¸ v0.1.0 ç›¸åŒï¼‰
import { createBarcode } from '@ldesign/barcode';

// æ–¹å¼2: ä»…å¯¼å…¥ç”Ÿæˆå™¨ï¼ˆå‡å°‘ ~40% ä½“ç§¯ï¼‰
import { createBarcode } from '@ldesign/barcode/generator';

// æ–¹å¼3: ä»…å¯¼å…¥æ‰«æå™¨
import { scanBarcode } from '@ldesign/barcode/scanner';

// æ–¹å¼4: æ€§èƒ½å·¥å…·
import { measure } from '@ldesign/barcode/performance';
```

### 2. æ‰¹é‡ç”Ÿæˆ

```typescript
import { generateBatch } from '@ldesign/barcode';

// æ‰¹é‡ç”Ÿæˆå¤šä¸ªæ¡ç 
const results = await generateBatch(
  ['123456', '789012', '345678'],
  { 
    format: BarcodeFormat.CODE128,
    width: 300,
    height: 100 
  },
  { 
    concurrency: 10, // å¹¶å‘æ•°
    onProgress: (completed, total) => {
      console.log(`Progress: ${completed}/${total}`);
    }
  }
);
```

### 3. æ€§èƒ½ç›‘æ§

```typescript
import { measure, getGlobalMonitor } from '@ldesign/barcode/performance';

// ç›‘æ§å•ä¸ªæ“ä½œ
const result = await measure('generate-barcode', async () => {
  return createBarcode({ content: '123456' });
});

// è·å–æ€§èƒ½æŠ¥å‘Š
const report = getGlobalMonitor().getReport();
console.log(`å¹³å‡è€—æ—¶: ${report.averageDuration}ms`);
```

### 4. ç¼“å­˜ç³»ç»Ÿ

```typescript
import { configureGlobalCache } from '@ldesign/barcode';

// é…ç½®å…¨å±€ç¼“å­˜
configureGlobalCache({
  maxSize: 200,           // æœ€å¤§ç¼“å­˜æ•°é‡
  maxAge: 10 * 60 * 1000, // 10åˆ†é’Ÿè¿‡æœŸ
});

// ç›¸åŒé…ç½®çš„æ¡ç ä¼šä»ç¼“å­˜è¯»å–ï¼Œæ€§èƒ½æå‡ 60-80%
const barcode1 = createBarcode({ content: '123' });
const barcode2 = createBarcode({ content: '123' }); // ä»ç¼“å­˜è¯»å–
```

### 5. èµ„æºæ± 

```typescript
import { configureGlobalCanvasPool } from '@ldesign/barcode';

// é…ç½® Canvas èµ„æºæ± ï¼ˆå‡å°‘ GC å‹åŠ›ï¼‰
configureGlobalCanvasPool(20);
```

### 6. å¢å¼ºçš„é”™è¯¯å¤„ç†

```typescript
import { ErrorHandler } from '@ldesign/barcode';

try {
  const barcode = createBarcode({ content: 'invalid' });
} catch (error) {
  // è·å–ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯å’Œè§£å†³å»ºè®®
  const { message, suggestions } = ErrorHandler.getHelpfulMessage(error);
  console.log(message);
  suggestions.forEach((s, i) => console.log(`${i + 1}. ${s}`));
}
```

### 7. OffscreenCanvas æ”¯æŒ

```typescript
import { OffscreenCanvasRenderer, isOffscreenCanvasSupported } from '@ldesign/barcode';

if (isOffscreenCanvasSupported()) {
  // å¯ä»¥åœ¨ Web Worker ä¸­ä½¿ç”¨
  const renderer = new OffscreenCanvasRenderer(300, 100);
  // ...
}
```

## ğŸ”„ ç ´åæ€§å˜æ›´

**æ— ç ´åæ€§å˜æ›´** - v0.2.0 å®Œå…¨å‘åå…¼å®¹ v0.1.0

## ğŸ“¦ å®‰è£…

```bash
npm install @ldesign/barcode@latest
```

## ğŸ¯ æ¨èçš„è¿ç§»æ­¥éª¤

### æ­¥éª¤ 1: æ›´æ–°ä¾èµ–
```bash
npm update @ldesign/barcode
```

### æ­¥éª¤ 2: ï¼ˆå¯é€‰ï¼‰ä¼˜åŒ–å¯¼å…¥
å¦‚æœæ‚¨çš„åº”ç”¨åªä½¿ç”¨ç”ŸæˆåŠŸèƒ½ï¼Œå¯ä»¥æ”¹ç”¨ç»†ç²’åº¦å¯¼å…¥ï¼š

```diff
- import { createBarcode } from '@ldesign/barcode';
+ import { createBarcode } from '@ldesign/barcode/generator';
```

### æ­¥éª¤ 3: ï¼ˆå¯é€‰ï¼‰å¯ç”¨ç¼“å­˜
åœ¨åº”ç”¨åˆå§‹åŒ–æ—¶é…ç½®ç¼“å­˜ï¼š

```typescript
import { configureGlobalCache } from '@ldesign/barcode';

configureGlobalCache({
  maxSize: 100,
  maxAge: 5 * 60 * 1000, // 5åˆ†é’Ÿ
});
```

### æ­¥éª¤ 4: ï¼ˆå¯é€‰ï¼‰ä½¿ç”¨æ‰¹é‡ç”Ÿæˆ
å¦‚æœéœ€è¦ç”Ÿæˆå¤§é‡æ¡ç ï¼š

```typescript
import { generateBatch } from '@ldesign/barcode';

const contents = [...]; // å¤§é‡æ•°æ®
const results = await generateBatch(contents, config);
```

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| åœºæ™¯ | v0.1.0 | v0.2.0 | æå‡ |
|------|--------|--------|------|
| å•æ¬¡ç”Ÿæˆ | 10ms | 10ms | æŒå¹³ |
| ç¼“å­˜å‘½ä¸­ | N/A | 0.5ms | +95% |
| æ‰¹é‡ç”Ÿæˆï¼ˆ100ä¸ªï¼‰ | 1000ms | 500ms | +50% |
| åŒ…ä½“ç§¯ï¼ˆä»…ç”Ÿæˆï¼‰ | 120KB | 80KB | -33% |

## ğŸ†• æ–°å¢ API

### æ‰¹é‡ç”Ÿæˆ
- `BatchBarcodeGenerator` ç±»
- `generateBatch()` å‡½æ•°
- `BatchConfig`, `BatchResult` ç±»å‹

### æ€§èƒ½ç›‘æ§
- `PerformanceMonitor` ç±»
- `PerformanceProfiler` ç±»
- `measure()`, `profile()` å‡½æ•°

### ç¼“å­˜ä¸èµ„æº
- `BarcodeCache` ç±»
- `CanvasPool` ç±»
- `configureGlobalCache()`, `configureGlobalCanvasPool()` å‡½æ•°

### é”™è¯¯å¤„ç†
- `BarcodeError`, `EncodingError`, `ValidationError` ç­‰é”™è¯¯ç±»
- `ErrorFactory`, `ErrorHandler` å·¥å…·ç±»

## ğŸ“š æ›´å¤šä¿¡æ¯

- [å®Œæ•´ CHANGELOG](./CHANGELOG.md)
- [ä¼˜åŒ–æŠ¥å‘Š](./OPTIMIZATION_REPORT.md)
- [API æ–‡æ¡£](./README.md)

## ğŸ› é—®é¢˜åé¦ˆ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æäº¤ Issue æˆ–è”ç³»ç»´æŠ¤å›¢é˜Ÿã€‚


